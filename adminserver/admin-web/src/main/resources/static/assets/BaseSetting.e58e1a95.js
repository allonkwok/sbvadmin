var v=(t,i,p)=>new Promise((d,m)=>{var _=e=>{try{s(p.next(e))}catch(o){m(o)}},l=e=>{try{s(p.throw(e))}catch(o){m(o)}},s=e=>e.done?d(e.value):Promise.resolve(e.value).then(_,l);s((p=p.apply(t,i)).next())});import{au as b,a as w,cD as I,C as D,s as E,N as S,fL as k,f as F,aw as n,o as C,j as B,z as r,n as a,B as f,h as U,F as T,az as R,t as N,i as V,E as $}from"./index.a0f4a53f.js";import{T as x}from"./index.74f87750.js";/* empty css              */import{D as M}from"./index.acf588db.js";import{B as z}from"./BasicForm.539460c6.js";import"./componentMap.532712b5.js";import{u as L}from"./useForm.c64d8c6a.js";import"./RadioButtonGroup.0d384df5.js";import{a as j}from"./index.03fe64f8.js";import{h as G}from"./header.d801b988.js";import{b as P}from"./data.5adb4b62.js";import{u as W}from"./upload.5259c734.js";import{e as A}from"./System.da883eb6.js";import{R as Z}from"./index.3facd4b8.js";import{C as q}from"./index.9fa96fb8.js";/* empty css              */import"./FormItem.vue_vue_type_script_lang.92918688.js";import"./index.c34f9609.js";import"./_baseIteratee.7eef18d3.js";import"./get.72cb776d.js";import"./DeleteOutlined.e19abfbb.js";import"./index.da68fb2b.js";import"./useRefs.727c25ab.js";import"./Form.1dc8a98e.js";import"./Col.82157996.js";import"./useFlexGapSupport.55bd0324.js";import"./useSize.bbc03f2d.js";import"./uniqBy.9a18c29f.js";import"./index.73a625c6.js";import"./useWindowSizeFn.61bf8fec.js";import"./FullscreenOutlined.a503eb0e.js";import"./index.c614ae28.js";import"./Checkbox.7a2e3c7b.js";import"./index.a4da4b30.js";import"./index.8681b128.js";import"./index.7392d982.js";import"./index.e3018fdb.js";import"./index.152abf5f.js";import"./useFormItem.51e35cd3.js";import"./index.112a9f37.js";import"./eagerComputed.f27ac635.js";import"./transButton.e15f313e.js";import"./index.49be5f7f.js";import"./index.0b5da165.js";import"./index.98ddc2e5.js";import"./isNumber.8890bb61.js";import"./uuid.2b29000c.js";import"./download.56687849.js";import"./base64Conver.08b9f4ec.js";import"./index.38d55bea.js";import"./index.82b1ebe6.js";import"./index.eaffcdc0.js";import"./index.0c949780.js";const H=w({components:{Tag:x,BasicForm:z,CollapseContainer:I,Button:D,ARow:Z,ACol:q,CropperAvatar:j,Divider:M},setup(){const{createMessage:t}=$(),i=E(),[p,{setFieldsValue:d,validate:m}]=L({labelWidth:120,schemas:P,showActionButtonGroup:!1});S(()=>v(this,null,function*(){const o=yield k();d(o)}));const _=F(()=>{const{avatar:o}=i.getUserInfo;return o||G}),l=F(()=>{const{roles:o}=i.getUserInfo;return o||[]});function s({source:o,data:u}){const c=i.getUserInfo;c.avatar=o,i.setUserInfo(c);const g={id:c.userId,avatar:u.result};A(g).then(()=>{t.success("\u4FEE\u6539\u6210\u529F!")}).catch(()=>{t.error("3")}).finally(()=>{})}function e(){return v(this,null,function*(){const o=yield m();A(o).then(u=>{t.success(u)}).catch(()=>{t.error("3")}).finally(()=>{})})}return{avatar:_,roles:l,register:p,uploadApi:W,updateAvatar:s,handleSubmit:e}}}),J={class:"change-avatar"};function K(t,i,p,d,m,_){const l=n("BasicForm"),s=n("a-col"),e=n("Divider"),o=n("Tag"),u=n("a-row"),c=n("CropperAvatar"),g=n("Button"),y=n("CollapseContainer");return C(),B(y,{title:"\u57FA\u672C\u8BBE\u7F6E",canExpan:!1},{default:r(()=>[a(u,{gutter:24},{default:r(()=>[a(s,{span:14},{default:r(()=>[a(l,{onRegister:t.register},null,8,["onRegister"])]),_:1}),a(s,{span:10},{default:r(()=>[a(e,null,{default:r(()=>[f("\u8D26\u53F7\u89D2\u8272")]),_:1}),a(u,{gutter:24},{default:r(()=>[(C(!0),U(T,null,R(t.roles,h=>(C(),B(o,{key:h.value,color:"green"},{default:r(()=>[f(N(h.nameZh),1)]),_:2},1024))),128))]),_:1}),a(e,null,{default:r(()=>[f("\u5934\u50CF")]),_:1}),a(u,{gutter:24},{default:r(()=>[V("div",J,[a(c,{uploadApi:t.uploadApi,value:t.avatar,btnText:"\u66F4\u6362\u5934\u50CF",btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:t.updateAvatar,width:"150"},null,8,["uploadApi","value","onChange"])])]),_:1})]),_:1})]),_:1}),a(g,{type:"primary",onClick:t.handleSubmit},{default:r(()=>[f(" \u66F4\u65B0\u57FA\u672C\u4FE1\u606F ")]),_:1},8,["onClick"])]),_:1})}var Qo=b(H,[["render",K],["__scopeId","data-v-941958e6"]]);export{Qo as default};
