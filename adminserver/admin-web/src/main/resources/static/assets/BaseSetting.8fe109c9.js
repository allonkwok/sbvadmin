var v=(t,i,p)=>new Promise((d,m)=>{var _=e=>{try{s(p.next(e))}catch(o){m(o)}},l=e=>{try{s(p.throw(e))}catch(o){m(o)}},s=e=>e.done?d(e.value):Promise.resolve(e.value).then(_,l);s((p=p.apply(t,i)).next())});import{au as b,a as w,cD as I,C as D,s as E,N as S,fL as k,f as F,aw as n,o as C,j as B,z as r,n as a,B as f,h as U,F as T,az as R,t as N,i as V,E as $}from"./index.21dbddea.js";import{T as x}from"./index.193019b5.js";/* empty css              */import{D as M}from"./index.a37178f8.js";import{B as z}from"./BasicForm.f15e10d2.js";import"./componentMap.89831d4d.js";import{u as L}from"./useForm.e0cbc007.js";import"./RadioButtonGroup.bc4b2238.js";import{a as j}from"./index.2121ff5c.js";import{h as G}from"./header.d801b988.js";import{b as P}from"./data.5adb4b62.js";import{u as W}from"./upload.1e95a7cd.js";import{e as A}from"./System.6ea9c3aa.js";import{R as Z}from"./index.4a1de338.js";import{C as q}from"./index.5e62cd22.js";/* empty css              */import"./FormItem.vue_vue_type_script_lang.ce9802a8.js";import"./index.c3a78ee8.js";import"./_baseIteratee.165cbc4f.js";import"./get.41fb1f2f.js";import"./DeleteOutlined.1931f992.js";import"./index.94534871.js";import"./useRefs.15808103.js";import"./Form.b6c45920.js";import"./Col.2a58f9a8.js";import"./useFlexGapSupport.06ccabe5.js";import"./useSize.e955a44e.js";import"./uniqBy.45490986.js";import"./index.5d9418ce.js";import"./useWindowSizeFn.7490f562.js";import"./FullscreenOutlined.1b876098.js";import"./index.82fe2da0.js";import"./Checkbox.b4e3675e.js";import"./index.17dda3d9.js";import"./index.63df3ac3.js";import"./index.ec76c75d.js";import"./index.c91c606e.js";import"./index.299e002f.js";import"./useFormItem.1145f6c8.js";import"./index.2ddb10b6.js";import"./eagerComputed.1ea2a8d9.js";import"./transButton.25f118c6.js";import"./index.903acead.js";import"./index.ba1296a1.js";import"./index.44538731.js";import"./isNumber.9b40a4c7.js";import"./uuid.2b29000c.js";import"./download.68505b66.js";import"./base64Conver.08b9f4ec.js";import"./index.7b25a8ae.js";import"./index.ead49ec7.js";import"./index.2e41d04d.js";import"./index.dd967332.js";const H=w({components:{Tag:x,BasicForm:z,CollapseContainer:I,Button:D,ARow:Z,ACol:q,CropperAvatar:j,Divider:M},setup(){const{createMessage:t}=$(),i=E(),[p,{setFieldsValue:d,validate:m}]=L({labelWidth:120,schemas:P,showActionButtonGroup:!1});S(()=>v(this,null,function*(){const o=yield k();d(o)}));const _=F(()=>{const{avatar:o}=i.getUserInfo;return o||G}),l=F(()=>{const{roles:o}=i.getUserInfo;return o||[]});function s({source:o,data:u}){const c=i.getUserInfo;c.avatar=o,i.setUserInfo(c);const g={id:c.userId,avatar:u.result};A(g).then(()=>{t.success("\u4FEE\u6539\u6210\u529F!")}).catch(()=>{t.error("3")}).finally(()=>{})}function e(){return v(this,null,function*(){const o=yield m();A(o).then(u=>{t.success(u)}).catch(()=>{t.error("3")}).finally(()=>{})})}return{avatar:_,roles:l,register:p,uploadApi:W,updateAvatar:s,handleSubmit:e}}}),J={class:"change-avatar"};function K(t,i,p,d,m,_){const l=n("BasicForm"),s=n("a-col"),e=n("Divider"),o=n("Tag"),u=n("a-row"),c=n("CropperAvatar"),g=n("Button"),y=n("CollapseContainer");return C(),B(y,{title:"\u57FA\u672C\u8BBE\u7F6E",canExpan:!1},{default:r(()=>[a(u,{gutter:24},{default:r(()=>[a(s,{span:14},{default:r(()=>[a(l,{onRegister:t.register},null,8,["onRegister"])]),_:1}),a(s,{span:10},{default:r(()=>[a(e,null,{default:r(()=>[f("\u8D26\u53F7\u89D2\u8272")]),_:1}),a(u,{gutter:24},{default:r(()=>[(C(!0),U(T,null,R(t.roles,h=>(C(),B(o,{key:h.value,color:"green"},{default:r(()=>[f(N(h.nameZh),1)]),_:2},1024))),128))]),_:1}),a(e,null,{default:r(()=>[f("\u5934\u50CF")]),_:1}),a(u,{gutter:24},{default:r(()=>[V("div",J,[a(c,{uploadApi:t.uploadApi,value:t.avatar,btnText:"\u66F4\u6362\u5934\u50CF",btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:t.updateAvatar,width:"150"},null,8,["uploadApi","value","onChange"])])]),_:1})]),_:1})]),_:1}),a(g,{type:"primary",onClick:t.handleSubmit},{default:r(()=>[f(" \u66F4\u65B0\u57FA\u672C\u4FE1\u606F ")]),_:1},8,["onClick"])]),_:1})}var Qo=b(H,[["render",K],["__scopeId","data-v-941958e6"]]);export{Qo as default};
