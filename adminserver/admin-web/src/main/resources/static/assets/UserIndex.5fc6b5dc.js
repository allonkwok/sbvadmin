import{B as D}from"./TableImg.292e04d9.js";import{k as I}from"./componentMap.89831d4d.js";import{u as v}from"./useTable.f07faccc.js";import{i as E,j as M}from"./System.6ea9c3aa.js";import{P}from"./index.262aa95b.js";import R from"./DeptTree.dd98f2f3.js";import{A as U}from"./index.9a0254d4.js";import{b as V}from"./index.5d9418ce.js";import{A as W,c as $,s as z}from"./UserModal.64050551.js";import{au as N,a as j,aZ as x,w as H,aw as t,o as r,j as p,z as n,n as c,B as k,h as S,F,az as B,t as w,l as L}from"./index.21dbddea.js";import{A as O}from"./index.2e41d04d.js";import{T as Z}from"./index.193019b5.js";import"./index.82fe2da0.js";import"./Checkbox.b4e3675e.js";import"./index.17dda3d9.js";import"./index.2ddb10b6.js";import"./eagerComputed.1ea2a8d9.js";import"./BasicForm.f15e10d2.js";/* empty css              *//* empty css              */import"./FormItem.vue_vue_type_script_lang.ce9802a8.js";import"./index.a37178f8.js";import"./index.c3a78ee8.js";import"./_baseIteratee.165cbc4f.js";import"./get.41fb1f2f.js";import"./DeleteOutlined.1931f992.js";import"./index.94534871.js";import"./useRefs.15808103.js";import"./Form.b6c45920.js";import"./Col.2a58f9a8.js";import"./useFlexGapSupport.06ccabe5.js";import"./useSize.e955a44e.js";import"./index.5e62cd22.js";import"./uniqBy.45490986.js";import"./index.4a1de338.js";import"./useForm.e0cbc007.js";import"./RadioButtonGroup.bc4b2238.js";import"./useFormItem.1145f6c8.js";import"./index.ec76c75d.js";import"./index.c91c606e.js";import"./index.63df3ac3.js";import"./uuid.2b29000c.js";import"./useWindowSizeFn.7490f562.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.169c31ba.js";import"./FullscreenOutlined.1b876098.js";import"./index.44538731.js";import"./isNumber.9b40a4c7.js";import"./fromPairs.84aabb58.js";import"./scrollTo.667abe92.js";import"./index.8d01bfec.js";import"./index.299e002f.js";import"./transButton.25f118c6.js";import"./index.903acead.js";import"./index.ba1296a1.js";import"./download.68505b66.js";import"./base64Conver.08b9f4ec.js";import"./index.7b25a8ae.js";import"./index.ead49ec7.js";import"./index.8d2cb20f.js";import"./useContentViewHeight.22c0cdcf.js";import"./ArrowLeftOutlined.a8bf1d79.js";import"./index.dd967332.js";import"./index.b67d3cce.js";import"./useContextMenu.91b2a531.js";import"./Dept.3f81adff.js";const G=j({name:"AccountManagement",components:{BasicTable:D,PageWrapper:P,AccountModal:W,TableAction:I,Avatar:O,Tag:Z,Authority:U,DeptTree:R},setup(){const o=x(),[C,{openModal:d}]=V(),f=H({}),[A,{reload:m,updateTableDataRecord:h}]=v({title:"\u8D26\u53F7\u5217\u8868",api:E,rowKey:"id",columns:$,formConfig:{labelWidth:120,schemas:z,autoSubmitOnEnter:!0},useSearchForm:!0,showTableSetting:!0,bordered:!0,handleSearchInfoFn(e){return e},actionColumn:{width:120,title:"\u64CD\u4F5C",dataIndex:"action"}});function g(){d(!0,{isUpdate:!1})}function _(e){d(!0,{record:e,isUpdate:!0})}function b(e){M(e.id).then(a=>{}).catch(a=>{}).finally(()=>{m()})}function u({isUpdate:e,values:a}){if(e){const s=h(a.id,a)}else m()}function y(e=""){f.deptId=e,m()}function T(e){o("/system/account_detail/"+e.id)}return{registerTable:A,registerModal:C,handleCreate:g,handleEdit:_,handleDelete:b,handleSuccess:u,handleSelect:y,handleView:T,searchInfo:f}}});function K(o,C,d,f,A,m){const h=t("DeptTree"),g=t("a-button"),_=t("Authority"),b=t("Avatar"),u=t("Tag"),y=t("TableAction"),T=t("BasicTable"),e=t("AccountModal"),a=t("PageWrapper");return r(),p(a,{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:n(()=>[c(h,{class:"w-1/4 xl:w-1/5",onSelect:o.handleSelect},null,8,["onSelect"]),c(T,{onRegister:o.registerTable,class:"w-3/4 xl:w-4/5",searchInfo:o.searchInfo},{toolbar:n(()=>[c(_,{value:"/api/users|POST"},{default:n(()=>[c(g,{type:"primary",onClick:o.handleCreate},{default:n(()=>[k("\u65B0\u589E\u8D26\u53F7")]),_:1},8,["onClick"])]),_:1})]),bodyCell:n(({column:s,record:i})=>[s.key==="avatar"?(r(),p(b,{key:0,size:60,src:i.avatar},null,8,["src"])):s.key==="roles"?(r(!0),S(F,{key:1},B(i.roles,l=>(r(),p(u,{key:l.name,color:"green"},{default:n(()=>[k(w(l.nameZh),1)]),_:2},1024))),128)):s.key==="depts"?(r(!0),S(F,{key:2},B(i.depts,l=>(r(),p(u,{key:l.id,color:"green"},{default:n(()=>[k(w(l.name),1)]),_:2},1024))),128)):s.key==="action"?(r(),p(y,{key:3,actions:[{icon:"clarity:info-standard-line",tooltip:"\u67E5\u770B\u7528\u6237\u8BE6\u60C5",onClick:o.handleView.bind(null,i)},{icon:"clarity:note-edit-line",tooltip:"\u7F16\u8F91\u7528\u6237\u8D44\u6599",onClick:o.handleEdit.bind(null,i)},{icon:"ant-design:delete-outlined",color:"error",tooltip:"\u5220\u9664\u6B64\u8D26\u53F7",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",placement:"left",confirm:o.handleDelete.bind(null,i)}}]},null,8,["actions"])):L("",!0)]),_:1},8,["onRegister","searchInfo"]),c(e,{onRegister:o.registerModal,onSuccess:o.handleSuccess},null,8,["onRegister","onSuccess"])]),_:1})}var so=N(G,[["render",K]]);export{so as default};
